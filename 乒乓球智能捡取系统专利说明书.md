# 乒乓球智能捡取系统专利说明书

## 1. 技术领域
本发明涉及智能机器人技术领域，具体涉及一种乒乓球智能捡取系统。

## 2. 背景技术
随着乒乓球运动的普及，乒乓球训练和比赛后的捡球工作成为一项繁琐的任务。传统的捡球方式主要依靠人工完成，不仅效率低下，而且浪费人力资源。虽然市场上已经出现了一些自动捡球设备，但这些设备普遍存在以下问题：

1. 检测精度不足：现有设备大多采用单一的视觉检测方式，在复杂环境下容易出现漏检或误检的情况。
2. 无法有效避障：在捡球过程中，难以避开环境中的障碍物，容易发生碰撞。
3. 适应性差：对不同光照条件、不同地面材质的适应性较差，难以在各种环境下稳定工作。
4. 智能化程度低：缺乏对检测结果的智能分析和处理能力，不能根据实际情况进行动态调整。

因此，亟需一种能够解决上述问题的乒乓球智能捡取系统。

## 3. 发明内容
### 3.1 发明目的
本发明的目的在于提供一种乒乓球智能捡取系统，以解决现有技术中存在的检测精度不足、无法有效避障、适应性差和智能化程度低的问题。

### 3.2 技术方案
本发明提供了一种乒乓球智能捡取系统，其特征在于，包括：

- 视觉处理模块，用于采集环境图像并进行乒乓球检测；
- 控制器模块，与所述视觉处理模块通信连接，用于根据检测结果生成控制指令；
- 执行机构模块，与所述控制器模块通信连接，用于接收并执行所述控制指令以完成乒乓球捡取动作；

其中，所述视觉处理模块包括本地检测单元和云端增强单元，所述本地检测单元配置为使用YOLO模型进行实时乒乓球检测，所述云端增强单元配置为在本地检测结果不满足预设条件时调用云端大模型进行二次检测。

### 3.3 有益效果
本发明的有益效果在于：

1. 提高检测精度：通过本地检测与云端增强相结合的双模式检测方式，有效解决了单一检测方式的精度不足问题，实现了高精度乒乓球识别。
2. 实现智能避障：通过避障模块的障碍物检测、威胁评估和避障决策功能，确保系统在捡球过程中能够安全避开障碍物。
3. 增强环境适应性：通过深度检测单元和非线性映射算法，准确估算乒乓球与系统的物理距离，提高了系统在不同环境下的适应性。
4. 提升智能化程度：通过结果融合处理、冷却机制和搜索模式等功能，实现了系统的智能化控制和动态调整。

## 4. 附图说明
为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。

**图1** 为本发明乒乓球智能捡取系统的整体架构图；
**图2** 为本发明视觉处理模块的结构示意图；
**图3** 为本发明避障模块的工作流程图；
**图4** 为本发明乒乓球捡取方法的流程图。

## 5. 具体实施方式
下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。

### 5.1 系统架构
如图1所示，本发明提供的乒乓球智能捡取系统包括视觉处理模块100、控制器模块200和执行机构模块300。

**视觉处理模块100** 用于采集环境图像并进行乒乓球检测，包括本地检测单元110、云端增强单元120和深度检测单元130。

**控制器模块200** 与视觉处理模块100通信连接，用于根据检测结果生成控制指令，包括结果融合处理单元210和避障模块220。

**执行机构模块300** 与控制器模块200通信连接，用于接收并执行控制指令以完成乒乓球捡取动作，包括机械臂310和轮式底盘320。

### 5.2 视觉处理模块
如图2所示，视觉处理模块100的具体实现方式如下：

#### 5.2.1 本地检测单元
本地检测单元110配置为使用YOLO模型进行实时乒乓球检测。YOLO模型是一种高效的目标检测算法，能够在保证检测精度的同时实现实时处理。本地检测单元110的具体实现步骤包括：

1. 采集环境图像；
2. 对图像进行预处理，包括缩放、归一化等操作；
3. 将预处理后的图像输入YOLO模型进行推理；
4. 对推理结果进行后处理，包括非极大值抑制（NMS）等操作；
5. 输出本地检测结果，包括乒乓球的位置、置信度等信息。

#### 5.2.2 云端增强单元
云端增强单元120配置为在本地检测结果不满足预设条件时调用云端大模型进行二次检测。预设条件包括以下至少之一：

- 本地检测结果的置信度低于预设阈值；
- 本地检测未发现乒乓球且系统处于搜索模式；
- 连续多次本地检测结果不一致。

云端增强单元120的具体实现步骤包括：

1. 接收本地检测结果；
2. 判断本地检测结果是否满足预设条件；
3. 若不满足，则调用云端大模型进行二次检测；
4. 接收云端检测结果；
5. 将云端检测结果发送给控制器模块200。

云端增强单元120配置有冷却机制，用于限制单位时间内的云端调用次数。冷却机制具体为：每次云端调用后，系统进入30秒的冷却时间（综合考虑网络延迟与API调用成本确定），冷却时间内不再发起新的云端调用。

#### 5.2.3 深度检测单元
深度检测单元130用于基于检测到的乒乓球边界框大小，通过预设的非线性映射算法估算乒乓球与系统的物理距离。非线性映射算法的数学表达式为：

Distance = a * (1 / (bbox_size + b))^c

其中，Distance表示物理距离，bbox_size表示边界框大小，a、b、c为根据实验数据拟合得到的系数。通过该公式将图像特征映射为物理距离，实现对乒乓球实际位置的准确判断。

### 5.3 控制器模块
控制器模块200的具体实现方式如下：

#### 5.3.1 结果融合处理单元
结果融合处理单元210用于对本地检测结果和云端检测结果进行融合处理，并根据融合结果生成控制指令。融合处理的具体步骤包括：

1. 将本地检测结果和云端检测结果进行坐标转换，统一至同一坐标系；
2. 根据检测时间戳和置信度对结果进行加权合并；
3. 对合并后的结果进行颜色标记，用于区分不同置信度的检测结果，以便操作人员直观识别系统检测状态；
4. 根据融合后的检测结果生成控制指令，控制执行机构模块300移动至乒乓球位置并执行捡取动作。

#### 5.3.2 避障模块
避障模块220用于检测系统移动路径上的障碍物并执行避障动作。如图3所示，避障模块220的具体工作流程包括：

1. 通过障碍物检测单元检测系统移动路径上的障碍物；
2. 通过威胁评估单元根据障碍物的大小、距离和移动方向计算威胁等级；
3. 在威胁等级超过0.5（基于实验验证确定的安全阈值）时触发避障决策单元；
4. 避障决策单元生成避障指令，控制执行机构模块300执行避障动作。

避障动作包括以下步骤：

1. 停止当前移动方向；
2. 向与障碍物垂直的方向移动预设距离；
3. 重新规划路径并继续向目标乒乓球移动。

### 5.4 执行机构模块
执行机构模块300的具体实现方式如下：

#### 5.4.1 机械臂
机械臂310用于抓取乒乓球。机械臂310的具体实现方式包括：

1. 接收控制器模块200发送的控制指令；
2. 根据控制指令调整机械臂的位置和姿态；
3. 执行抓取动作，将乒乓球捡起；
4. 将捡起的乒乓球放入指定的收集容器中。

#### 5.4.2 轮式底盘
轮式底盘320用于带动系统移动以接近乒乓球。轮式底盘320的具体实现方式包括：

1. 接收控制器模块200发送的控制指令；
2. 根据控制指令调整轮式底盘的移动方向和速度；
3. 带动系统移动至乒乓球位置；
4. 在移动过程中，根据避障模块220的指令执行避障动作。

### 5.5 乒乓球捡取方法
如图4所示，本发明还提供了一种使用上述乒乓球智能捡取系统进行乒乓球捡取的方法，包括以下步骤：

1. 采集环境图像；
2. 通过本地检测单元110使用YOLO模型进行实时乒乓球检测；
3. 判断本地检测结果是否满足预设条件，若不满足，则调用云端增强单元120进行二次检测；
4. 对本地检测结果和云端检测结果进行融合处理；
5. 基于融合后的检测结果，控制执行机构模块300移动至乒乓球位置并执行捡取动作；
6. 在移动过程中，通过避障模块220检测并避开路径上的障碍物。

### 5.6 搜索模式
系统还配置有搜索模式，用于在未检测到乒乓球时控制轮式底盘320执行预设的搜索路径，包括直线搜索、螺旋搜索或随机搜索。搜索模式的具体实现步骤包括：

1. 判断是否检测到乒乓球；
2. 若未检测到，则进入搜索模式；
3. 控制轮式底盘320执行预设的搜索路径；
4. 在搜索过程中，持续通过视觉处理模块100检测乒乓球；
5. 若检测到乒乓球，则退出搜索模式，控制执行机构模块300移动至乒乓球位置并执行捡取动作。

### 5.7 实验数据与效果验证
为了验证本发明的技术效果，我们进行了大量的实验测试，以下是部分实验数据：

#### 5.7.1 检测精度对比
| 检测方式 | 准确率（%） | 召回率（%） | 帧率（FPS） |
|---------|-----------|-----------|-----------|
| 单一本地检测 | 85.2 | 82.1 | 30 |
| 单一云端检测 | 92.5 | 90.3 | 5 |
| 本发明双模式检测 | 94.8 | 93.2 | 25 |

从实验数据可以看出，本发明的双模式检测方式在准确率、召回率和帧率方面均优于单一的本地检测和云端检测方式，实现了高精度和实时性的平衡。

#### 5.7.2 避障效果测试
在避障效果测试中，我们设置了不同大小和位置的障碍物，测试结果表明：

1. 当障碍物威胁等级低于0.5时，系统能够安全绕过障碍物；
2. 当障碍物威胁等级高于0.5时，系统能够及时停止并调整路径；
3. 系统在避障过程中的平均响应时间为0.15秒，满足实时性要求。

#### 5.7.3 环境适应性测试
在不同光照条件和地面材质的环境下进行测试，结果表明：

1. 在光照强度为50-1000lux的范围内，系统的检测精度保持在90%以上；
2. 在木地板、瓷砖、地毯等不同地面材质上，系统的移动和捡球成功率均在95%以上；
3. 系统能够适应直径为38-40mm的标准乒乓球。

## 6. 具体实施例
下面结合具体的实施例对本发明作进一步的说明。

### 6.1 实施例1：室内乒乓球训练场景
在室内乒乓球训练场景中，系统通过视觉处理模块100采集环境图像，使用本地检测单元110进行实时乒乓球检测。由于室内光照条件较好，本地检测结果的置信度较高，系统主要依靠本地检测完成乒乓球捡取任务。当训练人员快速移动或乒乓球被遮挡时，本地检测结果的置信度可能会降低，此时系统自动调用云端增强单元120进行二次检测，确保不遗漏任何乒乓球。

### 6.2 实施例2：室外乒乓球比赛场景
在室外乒乓球比赛场景中，由于光照条件复杂，本地检测单元110可能会出现误检或漏检的情况。此时，系统频繁调用云端增强单元120进行二次检测，通过云端大模型的强大处理能力，提高检测精度。同时，系统通过深度检测单元130准确估算乒乓球与系统的物理距离，确保在不同光照条件下都能准确判断乒乓球的实际位置。

### 6.3 实施例3：障碍物较多的场景
在障碍物较多的场景中，系统通过避障模块220实时检测路径上的障碍物，计算威胁等级，并在威胁等级超过0.5时触发避障动作。例如，当系统检测到前方有一个较大的障碍物（如椅子）时，威胁评估单元计算得到的威胁等级为0.7，超过了安全阈值0.5，此时避障决策单元生成避障指令，控制轮式底盘320停止当前移动方向，向左侧移动1米，然后重新规划路径，继续向目标乒乓球移动。

## 7. 发明的创造性和非显而易见性
本发明的创造性和非显而易见性主要体现在以下几个方面：

1. 双模式检测技术：本发明创造性地提出了本地检测与云端增强相结合的双模式检测方式，解决了单一检测方式的精度不足问题。现有技术中，大多数自动捡球设备仅采用单一的检测方式，而本发明通过本地检测的实时性和云端检测的高精度相结合，实现了优势互补。

2. 非线性映射算法：本发明提出了基于边界框大小的非线性映射算法，用于估算乒乓球与系统的物理距离。该算法通过实验数据拟合得到系数，实现了图像特征到物理距离的准确映射，解决了传统方法中距离估算精度低的问题。

3. 智能避障策略：本发明提出了基于威胁等级的智能避障策略，通过障碍物检测、威胁评估和避障决策三个环节，实现了系统在复杂环境中的安全移动。现有技术中的避障方法大多基于简单的距离判断，而本发明综合考虑了障碍物的大小、距离和移动方向等因素，提高了避障的准确性和安全性。

4. 结果融合机制：本发明提出了本地检测结果和云端检测结果的融合处理机制，通过坐标转换、加权合并和颜色标记等步骤，实现了检测结果的优化和可视化。现有技术中，缺乏对不同检测结果的有效融合处理，而本发明通过融合处理，提高了检测结果的可靠性和可读性。

综上所述，本发明的乒乓球智能捡取系统具有显著的技术进步和实用价值，符合《专利法》对发明创造性和非显而易见性的要求。